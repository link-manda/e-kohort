<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;

class WhoStandardToddlerSeeder extends Seeder
{
    public function run(): void
    {
        // Data standar WHO untuk BB/U (Berat Badan per Umur) - Laki-laki 13-24 bulan
        // Format: [umur_bulan, -3SD, -2SD, -1SD, Median, +1SD, +2SD, +3SD]
        $bbUBoysData = [
            ['age' => 13, 'sd' => [7.1, 7.9, 8.8, 9.9, 11.0, 12.3, 13.7]],
            ['age' => 14, 'sd' => [7.2, 8.1, 9.0, 10.1, 11.3, 12.6, 14.0]],
            ['age' => 15, 'sd' => [7.4, 8.3, 9.2, 10.3, 11.5, 12.8, 14.3]],
            ['age' => 16, 'sd' => [7.5, 8.4, 9.4, 10.5, 11.7, 13.1, 14.6]],
            ['age' => 17, 'sd' => [7.7, 8.6, 9.6, 10.7, 12.0, 13.4, 14.9]],
            ['age' => 18, 'sd' => [7.8, 8.8, 9.8, 10.9, 12.2, 13.7, 15.3]],
            ['age' => 19, 'sd' => [8.0, 8.9, 10.0, 11.1, 12.5, 13.9, 15.6]],
            ['age' => 20, 'sd' => [8.1, 9.1, 10.1, 11.3, 12.7, 14.2, 15.9]],
            ['age' => 21, 'sd' => [8.2, 9.2, 10.3, 11.5, 12.9, 14.5, 16.2]],
            ['age' => 22, 'sd' => [8.4, 9.4, 10.5, 11.8, 13.2, 14.7, 16.5]],
            ['age' => 23, 'sd' => [8.5, 9.5, 10.7, 12.0, 13.4, 15.0, 16.8]],
            ['age' => 24, 'sd' => [8.6, 9.7, 10.8, 12.2, 13.6, 15.3, 17.1]],
            // Sample for older ages (every 6 months to save space, assuming interpolation or just key points)
            ['age' => 30, 'sd' => [9.4, 10.5, 11.8, 13.3, 15.0, 16.9, 19.0]],
            ['age' => 36, 'sd' => [10.0, 11.3, 12.7, 14.3, 16.2, 18.3, 20.7]],
            ['age' => 42, 'sd' => [10.6, 12.0, 13.6, 15.3, 17.4, 19.7, 22.3]],
            ['age' => 48, 'sd' => [11.2, 12.7, 14.4, 16.3, 18.6, 21.2, 24.0]],
            ['age' => 54, 'sd' => [11.8, 13.4, 15.2, 17.3, 19.7, 22.5, 25.7]],
            ['age' => 60, 'sd' => [12.4, 14.1, 16.0, 18.3, 21.0, 24.2, 27.9]],
        ];

        $bbUGirlsData = [
            ['age' => 13, 'sd' => [6.4, 7.2, 8.1, 9.2, 10.4, 11.8, 13.3]],
            ['age' => 14, 'sd' => [6.6, 7.4, 8.3, 9.4, 10.6, 12.1, 13.7]],
            ['age' => 15, 'sd' => [6.7, 7.6, 8.5, 9.6, 10.9, 12.4, 14.1]],
            ['age' => 16, 'sd' => [6.9, 7.7, 8.7, 9.8, 11.1, 12.6, 14.5]],
            ['age' => 17, 'sd' => [7.0, 7.9, 8.9, 10.0, 11.4, 12.9, 14.8]],
            ['age' => 18, 'sd' => [7.2, 8.1, 9.1, 10.2, 11.6, 13.2, 15.2]],
            ['age' => 19, 'sd' => [7.3, 8.2, 9.2, 10.4, 11.8, 13.5, 15.5]],
            ['age' => 20, 'sd' => [7.5, 8.4, 9.4, 10.6, 12.1, 13.7, 15.9]],
            ['age' => 21, 'sd' => [7.6, 8.6, 9.6, 10.9, 12.3, 14.0, 16.2]],
            ['age' => 22, 'sd' => [7.8, 8.7, 9.8, 11.1, 12.5, 14.3, 16.6]],
            ['age' => 23, 'sd' => [7.9, 8.9, 10.0, 11.3, 12.8, 14.6, 17.0]],
            ['age' => 24, 'sd' => [8.1, 9.0, 10.2, 11.5, 13.0, 14.8, 17.3]],
            // Sample for older ages
            ['age' => 30, 'sd' => [8.9, 10.0, 11.2, 12.7, 14.4, 16.4, 18.8]],
            ['age' => 36, 'sd' => [9.6, 10.8, 12.2, 13.9, 15.8, 18.1, 20.9]],
            ['age' => 42, 'sd' => [10.3, 11.6, 13.1, 15.0, 17.2, 19.8, 22.9]],
            ['age' => 48, 'sd' => [10.9, 12.3, 14.0, 16.1, 18.5, 21.5, 25.0]],
            ['age' => 54, 'sd' => [11.5, 13.0, 14.9, 17.2, 19.9, 23.2, 27.2]],
            ['age' => 60, 'sd' => [12.1, 13.7, 15.8, 18.2, 21.2, 24.9, 29.5]],
        ];

        // TB/U (Tinggi Badan per Umur) - Laki-laki 13-24 bulan
        $tbUBoysData = [
            ['age' => 13, 'sd' => [71.0, 73.0, 75.0, 77.0, 79.0, 81.0, 83.0]], // Estimated linear progression from 12mo
            ['age' => 14, 'sd' => [72.0, 74.0, 76.0, 78.0, 80.0, 82.0, 84.0]],
            ['age' => 15, 'sd' => [73.0, 75.0, 77.0, 79.1, 81.1, 83.1, 85.1]],
            ['age' => 16, 'sd' => [73.9, 75.9, 78.0, 80.2, 82.2, 84.2, 86.2]],
            ['age' => 17, 'sd' => [74.8, 76.8, 79.0, 81.2, 83.2, 85.2, 87.2]],
            ['age' => 18, 'sd' => [75.6, 77.6, 79.9, 82.3, 84.3, 86.3, 88.3]],
            ['age' => 19, 'sd' => [76.5, 78.5, 80.8, 83.2, 85.2, 87.2, 89.2]],
            ['age' => 20, 'sd' => [77.3, 79.3, 81.7, 84.2, 86.2, 88.2, 90.2]],
            ['age' => 21, 'sd' => [78.1, 80.1, 82.5, 85.1, 87.1, 89.1, 91.1]],
            ['age' => 22, 'sd' => [78.9, 80.9, 83.4, 86.0, 88.0, 90.0, 92.0]],
            ['age' => 23, 'sd' => [79.6, 81.7, 84.2, 86.9, 89.0, 91.0, 93.0]],
            ['age' => 24, 'sd' => [80.3, 82.4, 85.0, 87.8, 90.0, 92.0, 94.0]],
            // Older
            ['age' => 36, 'sd' => [87.4, 90.1, 92.4, 96.1, 99.1, 102.1, 105.1]],
            ['age' => 48, 'sd' => [93.0, 96.0, 99.0, 103.3, 106.3, 109.3, 112.3]],
            ['age' => 60, 'sd' => [98.0, 101.0, 104.0, 110.0, 114.0, 118.0, 122.0]],
        ];

        $tbUGirlsData = [
            ['age' => 13, 'sd' => [68.6, 71.3, 74.0, 76.8, 79.6, 82.4, 85.2]], // Est
            ['age' => 18, 'sd' => [74.0, 76.9, 79.8, 82.6, 85.6, 88.6, 91.6]],
            ['age' => 24, 'sd' => [78.7, 81.7, 84.8, 87.8, 90.8, 93.8, 96.8]],
            ['age' => 36, 'sd' => [86.0, 89.0, 92.0, 95.1, 98.1, 101.1, 104.1]],
            ['age' => 48, 'sd' => [92.0, 95.0, 98.0, 102.7, 105.7, 108.7, 111.7]],
            ['age' => 60, 'sd' => [97.0, 100.0, 103.0, 109.4, 112.4, 115.4, 118.4]],
        ];

        // Insert BB/U Boys
        $this->insertData('BB_U', 'L', $bbUBoysData);
        $this->insertData('BB_U', 'P', $bbUGirlsData);

        // Insert TB/U Boys
        $this->insertData('TB_U', 'L', $tbUBoysData);
        $this->insertData('TB_U', 'P', $tbUGirlsData);

        // BB/TB data sudah ada sampel di seeder utama untuk panjang 45-85cm.
        // Tambahkan untuk tinggi 85-110cm (balita berdiri)
        $bbTbBoysData = [
            ['length' => 90.0, 'sd' => [10.5, 11.5, 12.5, 13.5, 14.5, 15.5, 16.5]],
            ['length' => 95.0, 'sd' => [11.5, 12.5, 13.5, 14.5, 15.8, 17.0, 18.2]],
            ['length' => 100.0, 'sd' => [12.5, 13.7, 14.8, 16.0, 17.5, 19.0, 20.5]],
            ['length' => 105.0, 'sd' => [13.7, 15.0, 16.3, 17.8, 19.5, 21.2, 23.0]],
            ['length' => 110.0, 'sd' => [15.0, 16.5, 18.0, 19.8, 21.8, 23.8, 26.0]],
        ];

        $bbTbGirlsData = [
            ['length' => 90.0, 'sd' => [10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0]],
            ['length' => 95.0, 'sd' => [11.0, 12.0, 13.0, 14.0, 15.2, 16.4, 17.6]],
            ['length' => 100.0, 'sd' => [12.0, 13.2, 14.3, 15.5, 17.0, 18.5, 20.0]],
            ['length' => 105.0, 'sd' => [13.2, 14.5, 15.8, 17.2, 18.9, 20.6, 22.3]],
            ['length' => 110.0, 'sd' => [14.5, 16.0, 17.5, 19.2, 21.1, 23.0, 25.0]],
        ];

        $this->insertData('BB_TB', 'L', $bbTbBoysData);
        $this->insertData('BB_TB', 'P', $bbTbGirlsData);

        $this->command->info('WHO Toddler Standards seeded successfully!');
    }

    private function insertData($type, $gender, $dataset)
    {
        foreach ($dataset as $data) {
            DB::table('who_standards')->insert([
                'gender' => $gender,
                'type' => $type,
                'age_month' => $data['age'] ?? null,
                'length_cm' => $data['length'] ?? null,
                'sd_minus_3' => $data['sd'][0],
                'sd_minus_2' => $data['sd'][1],
                'sd_minus_1' => $data['sd'][2],
                'sd_median' => $data['sd'][3],
                'sd_plus_1' => $data['sd'][4],
                'sd_plus_2' => $data['sd'][5],
                'sd_plus_3' => $data['sd'][6],
                'created_at' => now(),
                'updated_at' => now(),
            ]);
        }
    }
}
